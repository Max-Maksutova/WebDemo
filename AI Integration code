<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Government Reports Dashboard</title>
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="style.css">
</head>
<body style="background-image: url('https://upload.wikimedia.org/wikipedia/commons/thumb/1/1e/Flag_of_the_United_States.svg/1200px-Flag_of_the_United_States.svg.png'); background-size: cover; background-repeat: no-repeat; background-attachment: fixed; background-position: center; opacity: 0.97;">
  <div class="container" id="top">
    <header>
      <h1><i class="fas fa-landmark"></i> Government Reports Dashboard</h1>
      <button class="chat-button"><i class="fas fa-comment-dots"></i> Chat with AI</button>
    </header>

    <div class="filters">
      <input type="text" id="searchInput" placeholder="Search reports by title, summary or keywords...">
      
      <select id="agencyFilter" multiple></select>
      <select id="topicFilter" multiple></select>
      
      <div class="year-range">
        <label for="startYear">From:</label>
        <select id="startYear"></select>
        <label for="endYear">To:</label>
        <select id="endYear"></select>
      </div>
      
      <button class="clear-button" onclick="clearAllFilters()">
        <i class="fas fa-times-circle"></i> Clear Filters
      </button>
      
      <button class="export-button" onclick="exportFilteredCSV()">
        <i class="fas fa-file-download"></i> Export CSV
      </button>
    </div>

    <div class="tags" id="tagContainer"></div>
    <div id="reportList"></div>
  </div>
  
  <button id="backToTopBtn" class="back-to-top" aria-label="Back to top">
    <i class="fas fa-arrow-up"></i>
  </button>

  <!-- Add Botpress Webchat Script -->
  <script src="https://cdn.botpress.cloud/webchat/v0/inject.js"></script>
  
  <script>
    // Initialize Botpress Webchat
    window.botpressWebChat.init({
      host: "https://your-botpress-server.com",  // Replace with your Botpress server URL
      botId: "your-bot-id",                    // Replace with your Bot ID
      messaging: {
        title: "Chat with AI",
        subtitle: "How can I assist you today?",
        description: "A virtual assistant powered by Botpress"
      },
      hideWhenNotInUse: true,
      enableReset: false,  // Optionally allow the user to reset the conversation
      darkMode: true
    });

    // Open Botpress Webchat when the chat button is clicked
    document.querySelector('.chat-button').addEventListener('click', function () {
      window.botpressWebChat.open();  // Opens the webchat
    });
  </script>
</body>
</html>
